<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<script>
  window.addEventListener('load', async () => {

    const img = document.getElementById('img');
    const res = await fetch(img.src);
    const data = await res.text();
    const question =
      '\\s*\\.([\\w-]+)\\s*' +
      '{[^}]*fill\\s*:\\s*#(\\w+)\\s*;[^}]*}';
    const query = new RegExp(question, 'gm');
    const colorList = [];

    let match = query.exec(data);
    while (match !== null) {
      const name = match[1];
      const color = match[2];
      colorList.push({name, color});
      match = query.exec(data);
    }
    onResize();
  });
  window.addEventListener('resize', onResize);
  function onResize() {
    const canvas = document.getElementById('wheel');
    const cx = cy = canvas.clientWidth;
    canvas.width = cx;
    canvas.height = cy;
    const ctx = canvas.getContext('2d');
    const imgData = ctx.createImageData(cx, cy);
    let pos = 0;
    for (let y = 0; y < cy; y ++) {
      for (let x = 0; x < cx; x ++) {
        imgData.data[pos ++] = Math.random() * 256;
        imgData.data[pos ++] = Math.random() * 256;
        imgData.data[pos ++] = Math.random() * 256;
        imgData.data[pos ++] = 255;
      }
    }
    ctx.putImageData(imgData, 0, 0);
  }
</script>
<style>
body { margin: 0; }
.container {
  display: grid;
  justify-content: center;
  grid-template-columns: 40vmax 40vmax;
}
#img {
  width: 100%;
  height: 100%;
}
#wheel {
  width: 100%;
  height: 100%;
  background-color: green;
}
</style>
</head>
<body>
  <div class="container">
    <img id="img" src="./color-scheme.svg"></img>
    <canvas id="wheel" width=100 height=100></canvas>
  </div>
</body>
</html>
